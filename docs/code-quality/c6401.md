---
title: C6401
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6401
helpviewer_keywords:
- C6401
ms.assetid: d57b1c94-57a3-4d4b-a7de-8b9ffbac3ebe
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: d63d925455b0a53bb47e9452e34e65fc58729ed4
ms.sourcegitcommit: 174c992ecdc868ecbf7d3cee654bbc2855aeb67d
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/06/2019
ms.locfileid: "74877774"
---
# <a name="c6401"></a>C6401
aviso C6401: usando \<nome da função > em uma localidade padrão para executar uma comparação de maiúsculas e minúsculas à cadeia de caracteres constante \< nome da cadeia de caracteres >. Produz resultados inesperados com localidades que não sejam de língua inglesa

 Esse aviso indica que uma comparação que não diferencia maiúsculas de minúsculas em uma cadeia de caracteres constante está sendo executada ao especificar a localidade padrão; Normalmente, uma comparação independente de localidade era pretendida.

 A consequência comum desse defeito é o comportamento incorreto em localidades de fala que não estão em inglês. Por exemplo, em Turco, ". gif" não corresponderá a ". GIF "; em vietnamita, "logon" não corresponderá a "logon".

 A função `CompareString` usa uma localidade como um argumento; no entanto, passar em uma localidade padrão, por exemplo, a constante `LOCALE_USER_DEFAULT`, causará comportamentos diferentes em localidades diferentes, dependendo do padrão do usuário. Normalmente, as comparações que não diferenciam maiúsculas de minúsculas em relação a uma cadeia de caracteres constante devem ser executadas em uma comparação independente de localidade.

 Para executar uma comparação independente de localidade usando `CompareString` no Windows XP, o primeiro parâmetro deve ser a constante `LOCALE_INVARIANT`; por exemplo, para executar um teste independente de localidade para se `pString` corresponde a arquivo1. gif ignorando diferenças em maiúsculas/minúsculas, use uma chamada como:

```cpp
CompareString(LOCALE_INVARIANT,
              NORM_IGNORECASE,
              pString,
              -1,
              TEXT("file1.gif"),
              -1) == CSTR_EQUAL
```

## <a name="example"></a>Exemplo
 O código a seguir gera este aviso:

```cpp
include <windows.h>

int fd(char *ext)
{
  return (CompareString(LOCALE_USER_DEFAULT,
                        NORM_IGNORECASE,
                        ext,
                        -1,
                        TEXT("gif"),
                        -1) == 2);
}
```

 Para corrigir esse aviso, use o seguinte código:

```cpp
include <windows.h>
int f(char *ext)
{
  return (CompareString(LOCALE_INVARIANT,
                        NORM_IGNORECASE,
                        ext,
                        -1,
                        TEXT("gif"),
                        -1) == 2);
}
```

## <a name="see-also"></a>Consulte também
 <xref:Microsoft.VisualBasic.CompilerServices.Operators.CompareString%2A>
