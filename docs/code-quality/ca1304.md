---
title: 'CA1304: especificar CultureInfo'
ms.date: 06/30/2018
ms.topic: reference
f1_keywords:
- SpecifyCultureInfo
- CA1304
helpviewer_keywords:
- SpecifyCultureInfo
- CA1304
ms.assetid: b912d76a-54fd-4c93-b25d-16491e0ae319
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 668555c6247b45fea9e472ab5347d692243c1d9f
ms.sourcegitcommit: ade07bd1cf69b8b494d171ae648cfdd54f7800d3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/21/2020
ms.locfileid: "81649123"
---
# <a name="ca1304-specify-cultureinfo"></a>CA1304: especificar CultureInfo

|||
|-|-|
|TypeName|SpecifyCultureInfo|
|CheckId|CA1304|
|Categoria|Microsoft.Globalização|
|Mudança de ruptura|Não quebrando|

## <a name="cause"></a>Causa

Um método ou construtor chama um membro que <xref:System.Globalization.CultureInfo?displayProperty=nameWithType> tem uma sobrecarga que aceita um parâmetro, e <xref:System.Globalization.CultureInfo> o método ou construtor não chama a sobrecarga que toma o parâmetro. Esta regra ignora chamadas para os seguintes métodos:

- <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetObject%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetString%2A?displayProperty=nameWithType>

Você também pode [configurar](#configurability) mais símbolos a serem excluídos por esta regra.

## <a name="rule-description"></a>Descrição da regra

Quando <xref:System.Globalization.CultureInfo> um <xref:System.IFormatProvider?displayProperty=nameWithType> ou objeto não é fornecido, o valor padrão fornecido pelo membro sobrecarregado pode não ter o efeito que você deseja em todas as localidades. Além disso, os membros do .NET escolhem a cultura padrão e a formatação com base em suposições que podem não estar corretas para o seu código. Para garantir que o código funcione conforme o esperado para seus cenários, você deve fornecer informações específicas da cultura de acordo com as seguintes diretrizes:

- Se o valor for exibido para o usuário, use a cultura atual. Consulte <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>.

- Se o valor for armazenado e acessado por software, ou seja, persistir em um arquivo ou banco de dados, use a cultura invariante. Consulte <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.

- Se você não sabe o destino do valor, mande o consumidor de dados ou provedor especificar a cultura.

Mesmo que o comportamento padrão do membro sobrecarregado seja apropriado para suas necessidades, é melhor chamar explicitamente a sobrecarga específica da cultura para que seu código seja auto-documentado e mais facilmente mantido.

> [!NOTE]
> <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>é usado apenas para recuperar recursos localizados <xref:System.Resources.ResourceManager?displayProperty=nameWithType> usando uma instância da classe.

## <a name="how-to-fix-violations"></a>Como corrigir violações

Para corrigir uma violação desta regra, use <xref:System.Globalization.CultureInfo> a sobrecarga que leva um argumento.

## <a name="when-to-suppress-warnings"></a>Quando suprimir avisos

É seguro suprimir um aviso desta regra quando é certo que a cultura padrão é a escolha correta, e onde a manutenção do código não é uma prioridade de desenvolvimento importante.

## <a name="configurability"></a>Configurabilidade

Se você estiver executando esta regra de [analisadores FxCop](install-fxcop-analyzers.md) (e não com análise de legado), você pode configurar a análise para esta regra.

### <a name="excluded-symbol-names"></a>Nomes de símbolos excluídos

Você pode configurar quais partes da sua base de código para excluir da análise. Por exemplo, para especificar que a regra não `MyType`deve ser executada em qualquer código dentro de tipos nomeados, adicione o seguinte par de valorde chave a um arquivo .editorconfig em seu projeto:

```ini
dotnet_code_quality.CA1304.excluded_symbol_names = MyType
```

Formatos de nome de símbolo permitidos no valor da opção (separados por '|'):

- Somente nome do símbolo (inclui todos os símbolos com o nome, independentemente do tipo ou namespace que contêm)
- Nomes totalmente qualificados no formato de ID de [documentação](https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format)do símbolo . Cada nome de símbolo requer um prefixo tipo símbolo, como "M:" prefixo para métodos, prefixo "T:" para tipos, prefixo "N:" para namespaces, etc.
- `.ctor`para construtores `.cctor` e para construtores estáticos

Exemplos:

| Valor de Opção | Resumo |
| --- | --- |
|`dotnet_code_quality.CA1304.excluded_symbol_names = MyType` | Corresponde a todos os símbolos chamados 'MyType' na compilação
|`dotnet_code_quality.CA1304.excluded_symbol_names = MyType1|MyType2` | Corresponde a todos os símbolos chamados 'MyType1' ou 'MyType2' na compilação
|`dotnet_code_quality.CA1304.excluded_symbol_names = M:NS.MyType.MyMethod(ParamType)` | Corresponde ao método específico 'MyMethod' com a assinatura totalmente qualificada
|`dotnet_code_quality.CA1304.excluded_symbol_names = M:NS1.MyType1.MyMethod1(ParamType)|M:NS2.MyType2.MyMethod2(ParamType)` | Corresponde aos métodos específicos 'MyMethod1' e 'MyMethod2' com respectiva assinatura totalmente qualificada

Você pode configurar todas essas opções apenas para esta regra, para todas as regras ou para todas as regras nesta categoria (Segurança). Para obter mais informações, consulte [Configure analisadores FxCop](configure-fxcop-analyzers.md).

## <a name="example-showing-how-to-fix-violations"></a>Exemplo mostrando como corrigir violações

No exemplo a `BadMethod` seguir, causa duas violações desta regra. `GoodMethod`corrige a primeira violação passando a <xref:System.String.Compare%2A?displayProperty=nameWithType>cultura invariante para , e <xref:System.String.ToLower%2A?displayProperty=nameWithType> corrige a segunda violação passando a cultura atual para porque `string3` é exibida para o usuário.

[!code-csharp[FxCop.Globalization.CultureInfo#1](../code-quality/codesnippet/CSharp/ca1304-specify-cultureinfo_1.cs)]

## <a name="example-showing-formatted-output"></a>Exemplo mostrando saída formatada

O exemplo a seguir mostra o <xref:System.IFormatProvider> efeito da cultura <xref:System.DateTime> atual no padrão selecionado pelo tipo.

[!code-csharp[FxCop.Globalization.IFormatProvider#1](../code-quality/codesnippet/CSharp/ca1304-specify-cultureinfo_2.cs)]

Esse exemplo gera a saída a seguir:

```txt
6/4/1900 12:15:12 PM
06/04/1900 12:15:12
```

## <a name="related-rules"></a>Regras relacionadas

- [CA1305: especificar IFormatProvider](../code-quality/ca1305.md)

## <a name="see-also"></a>Confira também

- [Usando a Classe CultureInfo](/dotnet/standard/globalization-localization/globalization#work-with-culture-specific-settings)
